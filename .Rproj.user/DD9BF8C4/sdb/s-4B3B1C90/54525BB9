{
    "collab_server" : "",
    "contents" : "library(data.table)\nlibrary(magrittr)\nlibrary(ggplot2)\nlibrary(ggpubr)\n\n\n# load & format data ------------------------------------------------------\n\nX <- read.csv('data/covid-19-data/covid-19-data/us-states.csv',stringsAsFactors = F) %>% as.data.table\n\nX[,deaths:=c(deaths[1],diff(deaths)),by=state]\n\n\n### for each state, we'll analyze growth rate in deaths starting on the first date with non-zero deaths.\nX[,date:=as.Date(date)]\nsetkey(X,state,date)\nX[,cumulative_deaths:=cumsum(deaths),by=state]\nY <- X[,list(deaths=sum(deaths)),by=date]\nX[,total_deaths:=sum(deaths),by=state]\nX <- X[total_deaths>20]\n\n\n## for the nation, we'll analyze growth rates with deaths after March 4 - the period of regular exp growth\n\nggplot(Y,aes(date,deaths))+\n  geom_point()+\n  geom_line()+\n  scale_y_continuous(trans='log')\n\nsetkey(Y,date)\nY <- Y[date>as.Date('2020-03-04') & date<as.Date('2020-04-01')]\nfit_national <- glm(deaths~date,family=poisson,data=Y)\ngr_national <- coef(fit_national)[2]\nse_national <- sqrt(vcov(fit_national)[4])\n\n\nggplot(Y,aes(date,deaths))+\n  geom_point()+\n  geom_line()+\n  geom_smooth(method='glm',method.args=list('family'=poisson))\n\n### test: is doubling time national < 3.5?\ngr_bound <- log(2)/3.5\npnorm(gr_bound,mean = gr_national,sd=se_national)\n# 5.274348e-21\n\ngr_national\n# 0.2344975\nlog(2)/gr_national\n# 2.955883 ",
    "created" : 1586104861455.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "337569212",
    "id" : "54525BB9",
    "lastKnownWriteTime" : 1586109284,
    "last_content_update" : 1586109284613,
    "path" : "~/Silverman/ili_surge/results/doubling_time_analysis.R",
    "project_path" : "results/doubling_time_analysis.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}